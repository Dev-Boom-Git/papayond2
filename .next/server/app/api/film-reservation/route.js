/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/film-reservation/route";
exports.ids = ["app/api/film-reservation/route"];
exports.modules = {

/***/ "(rsc)/./node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib sync recursive ^cardinal.*$":
/*!*************************************************************************************!*\
  !*** ./node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib/ sync ^cardinal.*$ ***!
  \*************************************************************************************/
/***/ ((module) => {

function webpackEmptyContext(req) {
	var e = new Error("Cannot find module '" + req + "'");
	e.code = 'MODULE_NOT_FOUND';
	throw e;
}
webpackEmptyContext.keys = () => ([]);
webpackEmptyContext.resolve = webpackEmptyContext;
webpackEmptyContext.id = "(rsc)/./node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/lib sync recursive ^cardinal.*$";
module.exports = webpackEmptyContext;

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "process":
/*!**************************!*\
  !*** external "process" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = require("process");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "string_decoder":
/*!*********************************!*\
  !*** external "string_decoder" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("string_decoder");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilm-reservation%2Froute&page=%2Fapi%2Ffilm-reservation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilm-reservation%2Froute.js&appDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilm-reservation%2Froute&page=%2Fapi%2Ffilm-reservation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilm-reservation%2Froute.js&appDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_comma_OneDrive_Desktop_papayond_1_src_app_api_film_reservation_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/film-reservation/route.js */ \"(rsc)/./src/app/api/film-reservation/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/film-reservation/route\",\n        pathname: \"/api/film-reservation\",\n        filename: \"route\",\n        bundlePath: \"app/api/film-reservation/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\comma\\\\OneDrive\\\\Desktop\\\\papayond-1\\\\src\\\\app\\\\api\\\\film-reservation\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_comma_OneDrive_Desktop_papayond_1_src_app_api_film_reservation_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/film-reservation/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNC4yLjVfcmVhY3QtZG9tQDE4LjMuMV9yZWFjdEAxOC4zLjFfX3JlYWN0QDE4LjMuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZmaWxtLXJlc2VydmF0aW9uJTJGcm91dGUmcGFnZT0lMkZhcGklMkZmaWxtLXJlc2VydmF0aW9uJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZmlsbS1yZXNlcnZhdGlvbiUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjb21tYSU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q3BhcGF5b25kLTElNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q2NvbW1hJTVDT25lRHJpdmUlNUNEZXNrdG9wJTVDcGFwYXlvbmQtMSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDMEM7QUFDdkg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92dWV4eS1tdWktbmV4dGpzLWFkbWluLXRlbXBsYXRlLz8wY2VjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXGNvbW1hXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxccGFwYXlvbmQtMVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxmaWxtLXJlc2VydmF0aW9uXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9maWxtLXJlc2VydmF0aW9uL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvZmlsbS1yZXNlcnZhdGlvblwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvZmlsbS1yZXNlcnZhdGlvbi9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGNvbW1hXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxccGFwYXlvbmQtMVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxmaWxtLXJlc2VydmF0aW9uXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9maWxtLXJlc2VydmF0aW9uL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilm-reservation%2Froute&page=%2Fapi%2Ffilm-reservation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilm-reservation%2Froute.js&appDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/film-reservation/route.js":
/*!***********************************************!*\
  !*** ./src/app/api/film-reservation/route.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var mysql2_promise__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mysql2/promise */ \"(rsc)/./node_modules/.pnpm/mysql2@3.11.0/node_modules/mysql2/promise.js\");\n// app/api/film-reservation/route.js\n\n// ฟังก์ชันเชื่อมต่อกับฐานข้อมูล\nconst dbConnect = async ()=>{\n    return await mysql2_promise__WEBPACK_IMPORTED_MODULE_0__.createConnection({\n        host: process.env.DB_HOST,\n        user: process.env.DB_USER,\n        password: process.env.DB_PASSWORD,\n        database: process.env.DB_NAME\n    });\n};\n// API GET เพื่อดึงข้อมูลจากตาราง address_booking หรือ address ตามพารามิเตอร์ที่ส่งมา\nasync function GET(request) {\n    let connection;\n    try {\n        const url = new URL(request.url);\n        const uni_id = url.searchParams.get(\"uni_id\");\n        const address_id = url.searchParams.get(\"address_id\");\n        // ตรวจสอบว่ามีการส่งพารามิเตอร์อย่างน้อยหนึ่งตัว\n        if (!uni_id && !address_id) {\n            return new Response(JSON.stringify({\n                error: \"Either uni_id or address_id parameter is required\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // เชื่อมต่อกับฐานข้อมูล\n        connection = await dbConnect();\n        let responseData;\n        if (address_id) {\n            // ดึง booking_no และ film_no ทั้งหมดจาก address_booking ตาม address_id\n            const query = \"SELECT id AS reservation_id, booking_no, film_no FROM address_booking WHERE address_id = ?\";\n            const params = [\n                address_id\n            ];\n            const [rows] = await connection.execute(query, params);\n            // สร้างอาร์เรย์ของ booking_no และ film_no จากผลลัพธ์ที่ได้ พร้อม reservation_id\n            const bookingDetails = rows.map((row)=>({\n                    booking_no: row.booking_no,\n                    film_no: row.film_no,\n                    reservation_id: row.reservation_id\n                }));\n            // ส่งข้อมูลกลับไป\n            responseData = {\n                booking_details: bookingDetails\n            };\n        } else if (uni_id) {\n            // ขั้นตอนที่ 1: ดึงข้อมูลจากตาราง address ตาม uni_id\n            const addressQuery = \"SELECT * FROM address WHERE uni_id = ?\";\n            const addressParams = [\n                uni_id\n            ];\n            const [addressRows] = await connection.execute(addressQuery, addressParams);\n            if (addressRows.length === 0) {\n                responseData = {\n                    data: []\n                };\n            } else {\n                const addressIds = addressRows.map((address)=>address.id);\n                if (addressIds.length === 0) {\n                    responseData = {\n                        data: []\n                    };\n                } else {\n                    // ขั้นตอนที่ 2: ดึงข้อมูล booking จาก address_booking ตาม address_id ที่ได้จาก address\n                    // สร้าง placeholder สำหรับ IN clause\n                    const placeholders = addressIds.map(()=>\"?\").join(\", \");\n                    const bookingQuery = `SELECT address_id, booking_no, film_no, id AS reservation_id FROM address_booking WHERE address_id IN (${placeholders})`;\n                    const bookingParams = addressIds;\n                    const [bookingRows] = await connection.execute(bookingQuery, bookingParams);\n                    // ขั้นตอนที่ 3: รวมข้อมูล address กับ booking\n                    const combinedData = [];\n                    addressRows.forEach((address)=>{\n                        const bookings = bookingRows.filter((booking)=>booking.address_id === address.id);\n                        if (bookings.length > 0) {\n                            bookings.forEach((booking)=>{\n                                combinedData.push({\n                                    ...address,\n                                    film_no: address.film_no,\n                                    booking_no: booking.booking_no,\n                                    booking_film_no: booking.film_no,\n                                    reservation_id: booking.reservation_id // เพิ่ม reservation_id\n                                });\n                            });\n                        } else {\n                            // ถ้าไม่มี booking ให้ส่งข้อมูล address พร้อม booking_no และ film_no เป็น null\n                            combinedData.push({\n                                ...address,\n                                film_no: address.film_no,\n                                booking_no: null,\n                                booking_film_no: null,\n                                reservation_id: null\n                            });\n                        }\n                    });\n                    responseData = {\n                        data: combinedData\n                    };\n                }\n            }\n        }\n        return new Response(JSON.stringify(responseData), {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to fetch data:\", error);\n        return new Response(JSON.stringify({\n            error: \"Failed to fetch data\",\n            details: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } finally{\n        if (connection) {\n            await connection.end();\n        }\n    }\n}\n// API PUT เพื่ออัปเดตข้อมูลในตาราง address_booking และ address\nasync function PUT(request) {\n    let connection;\n    try {\n        const { id, original_booking_no, film_no, booking_no, update_by, uni_id } = await request.json();\n        // ตรวจสอบว่าฟิลด์ที่จำเป็นมีค่า\n        if (!id || !update_by || !uni_id) {\n            return new Response(JSON.stringify({\n                error: \"Fields id, update_by, and uni_id are required\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // ตรวจสอบว่ามีการส่งอย่างน้อยหนึ่งฟิลด์สำหรับการอัปเดต\n        if (film_no === undefined && booking_no === undefined) {\n            return new Response(JSON.stringify({\n                error: \"At least one field (film_no or booking_no) must be provided to update\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // เชื่อมต่อกับฐานข้อมูล\n        connection = await dbConnect();\n        // เริ่มต้นธุรกรรม\n        await connection.beginTransaction();\n        let responseData;\n        if (original_booking_no !== undefined && original_booking_no !== null) {\n            // ถ้า original_booking_no ถูกส่งมาและไม่เป็น 'null', ทำการ UPDATE ใน address_booking\n            const updateBookingQuery = `\n        UPDATE address_booking\n        SET film_no = COALESCE(?, film_no),\n            booking_no = COALESCE(?, booking_no),\n            update_by = ?,\n            update_date = NOW()\n        WHERE address_id = ? AND booking_no = ?\n      `;\n            const updateBookingParams = [\n                film_no,\n                booking_no,\n                update_by,\n                id,\n                original_booking_no\n            ];\n            const [updateBookingResult] = await connection.execute(updateBookingQuery, updateBookingParams);\n            if (updateBookingResult.affectedRows === 0) {\n                await connection.rollback();\n                return new Response(JSON.stringify({\n                    error: \"No matching reservation found to update\"\n                }), {\n                    status: 404,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n            responseData = {\n                message: \"Updated reservation successfully\"\n            };\n        } else {\n            // ถ้า original_booking_no เป็น null หรือไม่ถูกระบุ, ทำการ UPDATE แถวที่มี booking_no เป็น null\n            const updateNullQuery = `\n        UPDATE address_booking\n        SET film_no = COALESCE(?, film_no),\n            booking_no = COALESCE(?, booking_no),\n            update_by = ?,\n            update_date = NOW()\n        WHERE address_id = ? AND booking_no IS NULL\n      `;\n            const updateNullParams = [\n                film_no,\n                booking_no,\n                update_by,\n                id\n            ];\n            const [updateNullResult] = await connection.execute(updateNullQuery, updateNullParams);\n            if (updateNullResult.affectedRows > 0) {\n                // ถ้าอัปเดตแถวสำเร็จ\n                responseData = {\n                    message: \"Updated reservation successfully\"\n                };\n            } else {\n                // ถ้าไม่มีแถวที่มี booking_no เป็น null, ทำการ INSERT แถวใหม่\n                const insertQuery = `\n          INSERT INTO address_booking (address_id, film_no, booking_no, update_by, update_date, uni_id)\n          VALUES (?, ?, ?, ?, NOW(), ?)\n        `;\n                const insertParams = [\n                    id,\n                    film_no,\n                    booking_no,\n                    update_by,\n                    uni_id\n                ];\n                const [insertResult] = await connection.execute(insertQuery, insertParams);\n                responseData = {\n                    message: \"Reservation created successfully\",\n                    reservation_id: insertResult.insertId\n                };\n            }\n        }\n        // ขั้นตอนเพิ่มเติม: ตรวจสอบและอัปเดต film_no ในตาราง address ถ้ามีการเปลี่ยนแปลง\n        if (film_no !== undefined) {\n            // ดึง film_no ปัจจุบันจากตาราง address\n            const selectAddressQuery = \"SELECT film_no FROM address WHERE id = ?\";\n            const [addressRows] = await connection.execute(selectAddressQuery, [\n                id\n            ]);\n            if (addressRows.length > 0) {\n                const currentFilmNo = addressRows[0].film_no;\n                // ถ้า film_no ใหม่ไม่เท่ากับ film_no ปัจจุบัน, ทำการอัปเดต\n                if (currentFilmNo !== film_no) {\n                    const updateAddressQuery = `\n            UPDATE address\n            SET film_no = ?,\n                update_by = ?,\n                update_date = NOW()\n            WHERE id = ?\n          `;\n                    const updateAddressParams = [\n                        film_no,\n                        update_by,\n                        id\n                    ];\n                    await connection.execute(updateAddressQuery, updateAddressParams);\n                    responseData.message += \" และอัปเดต film_no ใน address สำเร็จ\";\n                }\n            } else {\n                // ถ้าไม่พบ address ที่ตรงกับ id\n                await connection.rollback();\n                return new Response(JSON.stringify({\n                    error: \"Address not found\"\n                }), {\n                    status: 404,\n                    headers: {\n                        \"Content-Type\": \"application/json\"\n                    }\n                });\n            }\n        }\n        // ยืนยันธุรกรรม\n        await connection.commit();\n        return new Response(JSON.stringify(responseData), {\n            status: original_booking_no ? 200 : responseData.message.includes(\"created\") ? 201 : 200,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        if (connection) {\n            await connection.rollback();\n        }\n        console.error(\"Failed to update/create data:\", error);\n        return new Response(JSON.stringify({\n            error: \"Failed to update/create data\",\n            details: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } finally{\n        if (connection) {\n            await connection.end();\n        }\n    }\n}\n// API POST เพื่อสร้างข้อมูลใหม่ในตาราง address_booking\nasync function POST(request) {\n    let connection;\n    try {\n        const { id, film_no, booking_no, update_by, uni_id } = await request.json();\n        // ตรวจสอบว่าฟิลด์ทั้งหมดมีค่า\n        if (!id || !film_no || !booking_no || !update_by || !uni_id) {\n            return new Response(JSON.stringify({\n                error: \"All fields except original_booking_no are required\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // เชื่อมต่อกับฐานข้อมูล\n        connection = await dbConnect();\n        // ตรวจสอบว่ามีแถวที่ตรงกับ address_id และ booking_no อยู่แล้วหรือไม่\n        const checkQuery = `\n      SELECT * FROM address_booking WHERE address_id = ? AND booking_no = ?\n    `;\n        const checkParams = [\n            id,\n            booking_no\n        ];\n        const [existingRows] = await connection.execute(checkQuery, checkParams);\n        if (existingRows.length > 0) {\n            return new Response(JSON.stringify({\n                error: \"Reservation with this booking_no already exists\"\n            }), {\n                status: 409,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // ทำการ INSERT ข้อมูลใหม่ในตาราง address_booking\n        const insertQuery = `\n      INSERT INTO address_booking (address_id, film_no, booking_no, update_by, update_date, uni_id)\n      VALUES (?, ?, ?, ?, NOW(), ?)\n    `;\n        const insertParams = [\n            id,\n            film_no,\n            booking_no,\n            update_by,\n            uni_id\n        ];\n        const [result] = await connection.execute(insertQuery, insertParams);\n        return new Response(JSON.stringify({\n            message: \"Reservation created successfully\",\n            reservation_id: result.insertId\n        }), {\n            status: 201,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to create reservation:\", error);\n        return new Response(JSON.stringify({\n            error: \"Failed to create reservation\",\n            details: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } finally{\n        if (connection) {\n            await connection.end();\n        }\n    }\n}\n// API DELETE เพื่อลบข้อมูลในตาราง address_booking\nasync function DELETE(request) {\n    let connection;\n    try {\n        const { id, booking_no } = await request.json();\n        // ตรวจสอบว่าฟิลด์ที่จำเป็นมีค่า\n        if (!id || !booking_no) {\n            return new Response(JSON.stringify({\n                error: \"Fields id and booking_no are required\"\n            }), {\n                status: 400,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        // เชื่อมต่อกับฐานข้อมูล\n        connection = await dbConnect();\n        // ทำการ DELETE ข้อมูลในตาราง address_booking โดยใช้ address_id และ booking_no\n        const deleteQuery = `\n      DELETE FROM address_booking WHERE address_id = ? AND booking_no = ?\n    `;\n        const deleteParams = [\n            id,\n            booking_no\n        ];\n        const [result] = await connection.execute(deleteQuery, deleteParams);\n        if (result.affectedRows === 0) {\n            return new Response(JSON.stringify({\n                error: \"No matching reservation found to delete\"\n            }), {\n                status: 404,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        return new Response(JSON.stringify({\n            message: \"Reservation deleted successfully\"\n        }), {\n            status: 200,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } catch (error) {\n        console.error(\"Failed to delete reservation:\", error);\n        return new Response(JSON.stringify({\n            error: \"Failed to delete reservation\",\n            details: error.message\n        }), {\n            status: 500,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    } finally{\n        if (connection) {\n            await connection.end();\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9maWxtLXJlc2VydmF0aW9uL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsb0NBQW9DO0FBQ0Y7QUFFbEMsZ0NBQWdDO0FBQ2hDLE1BQU1DLFlBQVk7SUFDaEIsT0FBTyxNQUFNRCw0REFBc0IsQ0FBQztRQUNsQ0csTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxPQUFPO1FBQ3pCQyxNQUFNSCxRQUFRQyxHQUFHLENBQUNHLE9BQU87UUFDekJDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssV0FBVztRQUNqQ0MsVUFBVVAsUUFBUUMsR0FBRyxDQUFDTyxPQUFPO0lBQy9CO0FBQ0Y7QUFFQSxxRkFBcUY7QUFDOUUsZUFBZUMsSUFBSUMsT0FBTztJQUMvQixJQUFJQztJQUVKLElBQUk7UUFDRixNQUFNQyxNQUFNLElBQUlDLElBQUlILFFBQVFFLEdBQUc7UUFDL0IsTUFBTUUsU0FBU0YsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUM7UUFDcEMsTUFBTUMsYUFBYUwsSUFBSUcsWUFBWSxDQUFDQyxHQUFHLENBQUM7UUFFeEMsaURBQWlEO1FBQ2pELElBQUksQ0FBQ0YsVUFBVSxDQUFDRyxZQUFZO1lBQzFCLE9BQU8sSUFBSUMsU0FBU0MsS0FBS0MsU0FBUyxDQUFDO2dCQUFFQyxPQUFPO1lBQW9ELElBQUk7Z0JBQ2xHQyxRQUFRO2dCQUNSQyxTQUFTO29CQUFFLGdCQUFnQjtnQkFBbUI7WUFDaEQ7UUFDRjtRQUVBLHdCQUF3QjtRQUN4QlosYUFBYSxNQUFNZDtRQUVuQixJQUFJMkI7UUFFSixJQUFJUCxZQUFZO1lBQ2QsdUVBQXVFO1lBQ3ZFLE1BQU1RLFFBQVE7WUFDZCxNQUFNQyxTQUFTO2dCQUFDVDthQUFXO1lBQzNCLE1BQU0sQ0FBQ1UsS0FBSyxHQUFHLE1BQU1oQixXQUFXaUIsT0FBTyxDQUFDSCxPQUFPQztZQUUvQyxnRkFBZ0Y7WUFDaEYsTUFBTUcsaUJBQWlCRixLQUFLRyxHQUFHLENBQUNDLENBQUFBLE1BQVE7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QyxPQUFPLElBQUlILFNBQVNDLEtBQUtDLFNBQVMsQ0FBQztZQUFFQyxPQUFPO1lBQWdDb0MsU0FBU3BDLE1BQU1xQyxPQUFPO1FBQUMsSUFBSTtZQUNyR3BDLFFBQVE7WUFDUkMsU0FBUztnQkFBRSxnQkFBZ0I7WUFBbUI7UUFDaEQ7SUFDRixTQUFVO1FBQ1IsSUFBSVosWUFBWTtZQUNkLE1BQU1BLFdBQVdnRCxHQUFHO1FBQ3RCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Z1ZXh5LW11aS1uZXh0anMtYWRtaW4tdGVtcGxhdGUvLi9zcmMvYXBwL2FwaS9maWxtLXJlc2VydmF0aW9uL3JvdXRlLmpzPzMxNGMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gYXBwL2FwaS9maWxtLXJlc2VydmF0aW9uL3JvdXRlLmpzXG5pbXBvcnQgbXlzcWwgZnJvbSAnbXlzcWwyL3Byb21pc2UnXG5cbi8vIOC4n+C4seC4h+C4geC5jOC4iuC4seC4meC5gOC4iuC4t+C5iOC4reC4oeC4leC5iOC4reC4geC4seC4muC4kOC4suC4meC4guC5ieC4reC4oeC4ueC4pVxuY29uc3QgZGJDb25uZWN0ID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4gYXdhaXQgbXlzcWwuY3JlYXRlQ29ubmVjdGlvbih7XG4gICAgaG9zdDogcHJvY2Vzcy5lbnYuREJfSE9TVCxcbiAgICB1c2VyOiBwcm9jZXNzLmVudi5EQl9VU0VSLFxuICAgIHBhc3N3b3JkOiBwcm9jZXNzLmVudi5EQl9QQVNTV09SRCxcbiAgICBkYXRhYmFzZTogcHJvY2Vzcy5lbnYuREJfTkFNRVxuICB9KVxufVxuXG4vLyBBUEkgR0VUIOC5gOC4nuC4t+C5iOC4reC4lOC4tuC4h+C4guC5ieC4reC4oeC4ueC4peC4iOC4suC4geC4leC4suC4o+C4suC4hyBhZGRyZXNzX2Jvb2tpbmcg4Lir4Lij4Li34LitIGFkZHJlc3Mg4LiV4Liy4Lih4Lie4Liy4Lij4Liy4Lih4Li04LmA4LiV4Lit4Lij4LmM4LiX4Li14LmI4Liq4LmI4LiH4Lih4LiyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcbiAgbGV0IGNvbm5lY3Rpb25cblxuICB0cnkge1xuICAgIGNvbnN0IHVybCA9IG5ldyBVUkwocmVxdWVzdC51cmwpXG4gICAgY29uc3QgdW5pX2lkID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoJ3VuaV9pZCcpXG4gICAgY29uc3QgYWRkcmVzc19pZCA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KCdhZGRyZXNzX2lkJylcblxuICAgIC8vIOC4leC4o+C4p+C4iOC4quC4reC4muC4p+C5iOC4suC4oeC4teC4geC4suC4o+C4quC5iOC4h+C4nuC4suC4o+C4suC4oeC4tOC5gOC4leC4reC4o+C5jOC4reC4ouC5iOC4suC4h+C4meC5ieC4reC4ouC4q+C4meC4tuC5iOC4h+C4leC4seC4p1xuICAgIGlmICghdW5pX2lkICYmICFhZGRyZXNzX2lkKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdFaXRoZXIgdW5pX2lkIG9yIGFkZHJlc3NfaWQgcGFyYW1ldGVyIGlzIHJlcXVpcmVkJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8g4LmA4LiK4Li34LmI4Lit4Lih4LiV4LmI4Lit4LiB4Lix4Lia4LiQ4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54LilXG4gICAgY29ubmVjdGlvbiA9IGF3YWl0IGRiQ29ubmVjdCgpXG5cbiAgICBsZXQgcmVzcG9uc2VEYXRhXG5cbiAgICBpZiAoYWRkcmVzc19pZCkge1xuICAgICAgLy8g4LiU4Li24LiHIGJvb2tpbmdfbm8g4LmB4Lil4LiwIGZpbG1fbm8g4LiX4Lix4LmJ4LiH4Lir4Lih4LiU4LiI4Liy4LiBIGFkZHJlc3NfYm9va2luZyDguJXguLLguKEgYWRkcmVzc19pZFxuICAgICAgY29uc3QgcXVlcnkgPSAnU0VMRUNUIGlkIEFTIHJlc2VydmF0aW9uX2lkLCBib29raW5nX25vLCBmaWxtX25vIEZST00gYWRkcmVzc19ib29raW5nIFdIRVJFIGFkZHJlc3NfaWQgPSA/J1xuICAgICAgY29uc3QgcGFyYW1zID0gW2FkZHJlc3NfaWRdXG4gICAgICBjb25zdCBbcm93c10gPSBhd2FpdCBjb25uZWN0aW9uLmV4ZWN1dGUocXVlcnksIHBhcmFtcylcblxuICAgICAgLy8g4Liq4Lij4LmJ4Liy4LiH4Lit4Liy4Lij4LmM4LmA4Lij4Lii4LmM4LiC4Lit4LiHIGJvb2tpbmdfbm8g4LmB4Lil4LiwIGZpbG1fbm8g4LiI4Liy4LiB4Lic4Lil4Lil4Lix4Lie4LiY4LmM4LiX4Li14LmI4LmE4LiU4LmJIOC4nuC4o+C5ieC4reC4oSByZXNlcnZhdGlvbl9pZFxuICAgICAgY29uc3QgYm9va2luZ0RldGFpbHMgPSByb3dzLm1hcChyb3cgPT4gKHtcbiAgICAgICAgYm9va2luZ19ubzogcm93LmJvb2tpbmdfbm8sXG4gICAgICAgIGZpbG1fbm86IHJvdy5maWxtX25vLFxuICAgICAgICByZXNlcnZhdGlvbl9pZDogcm93LnJlc2VydmF0aW9uX2lkXG4gICAgICB9KSlcblxuICAgICAgLy8g4Liq4LmI4LiH4LiC4LmJ4Lit4Lih4Li54Lil4LiB4Lil4Lix4Lia4LmE4LibXG4gICAgICByZXNwb25zZURhdGEgPSB7IGJvb2tpbmdfZGV0YWlsczogYm9va2luZ0RldGFpbHMgfVxuICAgIH0gZWxzZSBpZiAodW5pX2lkKSB7XG4gICAgICAvLyDguILguLHguYnguJnguJXguK3guJnguJfguLXguYggMTog4LiU4Li24LiH4LiC4LmJ4Lit4Lih4Li54Lil4LiI4Liy4LiB4LiV4Liy4Lij4Liy4LiHIGFkZHJlc3Mg4LiV4Liy4LihIHVuaV9pZFxuICAgICAgY29uc3QgYWRkcmVzc1F1ZXJ5ID0gJ1NFTEVDVCAqIEZST00gYWRkcmVzcyBXSEVSRSB1bmlfaWQgPSA/J1xuICAgICAgY29uc3QgYWRkcmVzc1BhcmFtcyA9IFt1bmlfaWRdXG4gICAgICBjb25zdCBbYWRkcmVzc1Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKGFkZHJlc3NRdWVyeSwgYWRkcmVzc1BhcmFtcylcblxuICAgICAgaWYgKGFkZHJlc3NSb3dzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXNwb25zZURhdGEgPSB7IGRhdGE6IFtdIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGFkZHJlc3NJZHMgPSBhZGRyZXNzUm93cy5tYXAoYWRkcmVzcyA9PiBhZGRyZXNzLmlkKVxuXG4gICAgICAgIGlmIChhZGRyZXNzSWRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IHsgZGF0YTogW10gfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIOC4guC4seC5ieC4meC4leC4reC4meC4l+C4teC5iCAyOiDguJTguLbguIfguILguYnguK3guKHguLnguKUgYm9va2luZyDguIjguLLguIEgYWRkcmVzc19ib29raW5nIOC4leC4suC4oSBhZGRyZXNzX2lkIOC4l+C4teC5iOC5hOC4lOC5ieC4iOC4suC4gSBhZGRyZXNzXG4gICAgICAgICAgLy8g4Liq4Lij4LmJ4Liy4LiHIHBsYWNlaG9sZGVyIOC4quC4s+C4q+C4o+C4seC4miBJTiBjbGF1c2VcbiAgICAgICAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSBhZGRyZXNzSWRzLm1hcCgoKSA9PiAnPycpLmpvaW4oJywgJylcbiAgICAgICAgICBjb25zdCBib29raW5nUXVlcnkgPSBgU0VMRUNUIGFkZHJlc3NfaWQsIGJvb2tpbmdfbm8sIGZpbG1fbm8sIGlkIEFTIHJlc2VydmF0aW9uX2lkIEZST00gYWRkcmVzc19ib29raW5nIFdIRVJFIGFkZHJlc3NfaWQgSU4gKCR7cGxhY2Vob2xkZXJzfSlgXG4gICAgICAgICAgY29uc3QgYm9va2luZ1BhcmFtcyA9IGFkZHJlc3NJZHNcbiAgICAgICAgICBjb25zdCBbYm9va2luZ1Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKGJvb2tpbmdRdWVyeSwgYm9va2luZ1BhcmFtcylcblxuICAgICAgICAgIC8vIOC4guC4seC5ieC4meC4leC4reC4meC4l+C4teC5iCAzOiDguKPguKfguKHguILguYnguK3guKHguLnguKUgYWRkcmVzcyDguIHguLHguJogYm9va2luZ1xuICAgICAgICAgIGNvbnN0IGNvbWJpbmVkRGF0YSA9IFtdXG5cbiAgICAgICAgICBhZGRyZXNzUm93cy5mb3JFYWNoKGFkZHJlc3MgPT4ge1xuICAgICAgICAgICAgY29uc3QgYm9va2luZ3MgPSBib29raW5nUm93cy5maWx0ZXIoYm9va2luZyA9PiBib29raW5nLmFkZHJlc3NfaWQgPT09IGFkZHJlc3MuaWQpXG5cbiAgICAgICAgICAgIGlmIChib29raW5ncy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgIGJvb2tpbmdzLmZvckVhY2goYm9va2luZyA9PiB7XG4gICAgICAgICAgICAgICAgY29tYmluZWREYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgLi4uYWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgIGZpbG1fbm86IGFkZHJlc3MuZmlsbV9ubywgLy8g4LiU4Li24LiHIGZpbG1fbm8g4LiI4Liy4LiBIGFkZHJlc3NcbiAgICAgICAgICAgICAgICAgIGJvb2tpbmdfbm86IGJvb2tpbmcuYm9va2luZ19ubyxcbiAgICAgICAgICAgICAgICAgIGJvb2tpbmdfZmlsbV9ubzogYm9va2luZy5maWxtX25vLCAvLyBmaWxtX25vIOC4iOC4suC4gSBib29raW5nXG4gICAgICAgICAgICAgICAgICByZXNlcnZhdGlvbl9pZDogYm9va2luZy5yZXNlcnZhdGlvbl9pZCAvLyDguYDguJ7guLTguYjguKEgcmVzZXJ2YXRpb25faWRcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8g4LiW4LmJ4Liy4LmE4Lih4LmI4Lih4Li1IGJvb2tpbmcg4LmD4Lir4LmJ4Liq4LmI4LiH4LiC4LmJ4Lit4Lih4Li54LilIGFkZHJlc3Mg4Lie4Lij4LmJ4Lit4LihIGJvb2tpbmdfbm8g4LmB4Lil4LiwIGZpbG1fbm8g4LmA4Lib4LmH4LiZIG51bGxcbiAgICAgICAgICAgICAgY29tYmluZWREYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIC4uLmFkZHJlc3MsXG4gICAgICAgICAgICAgICAgZmlsbV9ubzogYWRkcmVzcy5maWxtX25vLCAvLyDguJTguLbguIcgZmlsbV9ubyDguIjguLLguIEgYWRkcmVzc1xuICAgICAgICAgICAgICAgIGJvb2tpbmdfbm86IG51bGwsXG4gICAgICAgICAgICAgICAgYm9va2luZ19maWxtX25vOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlc2VydmF0aW9uX2lkOiBudWxsXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIHJlc3BvbnNlRGF0YSA9IHsgZGF0YTogY29tYmluZWREYXRhIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2VEYXRhKSwge1xuICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICAgIH0pXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGE6JywgZXJyb3IpXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIGRhdGEnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0pLCB7XG4gICAgICBzdGF0dXM6IDUwMCxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gICAgfSlcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5lbmQoKVxuICAgIH1cbiAgfVxufVxuXG4vLyBBUEkgUFVUIOC5gOC4nuC4t+C5iOC4reC4reC4seC4m+C5gOC4lOC4leC4guC5ieC4reC4oeC4ueC4peC5g+C4meC4leC4suC4o+C4suC4hyBhZGRyZXNzX2Jvb2tpbmcg4LmB4Lil4LiwIGFkZHJlc3NcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQVVQocmVxdWVzdCkge1xuICBsZXQgY29ubmVjdGlvblxuXG4gIHRyeSB7XG4gICAgY29uc3QgeyBpZCwgb3JpZ2luYWxfYm9va2luZ19ubywgZmlsbV9ubywgYm9va2luZ19ubywgdXBkYXRlX2J5LCB1bmlfaWQgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICAvLyDguJXguKPguKfguIjguKrguK3guJrguKfguYjguLLguJ/guLTguKXguJTguYzguJfguLXguYjguIjguLPguYDguJvguYfguJnguKHguLXguITguYjguLJcbiAgICBpZiAoIWlkIHx8ICF1cGRhdGVfYnkgfHwgIXVuaV9pZCkge1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnRmllbGRzIGlkLCB1cGRhdGVfYnksIGFuZCB1bmlfaWQgYXJlIHJlcXVpcmVkJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Lin4LmI4Liy4Lih4Li14LiB4Liy4Lij4Liq4LmI4LiH4Lit4Lii4LmI4Liy4LiH4LiZ4LmJ4Lit4Lii4Lir4LiZ4Li24LmI4LiH4Lif4Li04Lil4LiU4LmM4Liq4Liz4Lir4Lij4Lix4Lia4LiB4Liy4Lij4Lit4Lix4Lib4LmA4LiU4LiVXG4gICAgaWYgKGZpbG1fbm8gPT09IHVuZGVmaW5lZCAmJiBib29raW5nX25vID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdBdCBsZWFzdCBvbmUgZmllbGQgKGZpbG1fbm8gb3IgYm9va2luZ19ubykgbXVzdCBiZSBwcm92aWRlZCB0byB1cGRhdGUnIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgICAgfVxuICAgICAgKVxuICAgIH1cblxuICAgIC8vIOC5gOC4iuC4t+C5iOC4reC4oeC4leC5iOC4reC4geC4seC4muC4kOC4suC4meC4guC5ieC4reC4oeC4ueC4pVxuICAgIGNvbm5lY3Rpb24gPSBhd2FpdCBkYkNvbm5lY3QoKVxuXG4gICAgLy8g4LmA4Lij4Li04LmI4Lih4LiV4LmJ4LiZ4LiY4Li44Lij4LiB4Lij4Lij4LihXG4gICAgYXdhaXQgY29ubmVjdGlvbi5iZWdpblRyYW5zYWN0aW9uKClcblxuICAgIGxldCByZXNwb25zZURhdGFcblxuICAgIGlmIChvcmlnaW5hbF9ib29raW5nX25vICE9PSB1bmRlZmluZWQgJiYgb3JpZ2luYWxfYm9va2luZ19ubyAhPT0gbnVsbCkge1xuICAgICAgLy8g4LiW4LmJ4LiyIG9yaWdpbmFsX2Jvb2tpbmdfbm8g4LiW4Li54LiB4Liq4LmI4LiH4Lih4Liy4LmB4Lil4Liw4LmE4Lih4LmI4LmA4Lib4LmH4LiZICdudWxsJywg4LiX4Liz4LiB4Liy4LijIFVQREFURSDguYPguJkgYWRkcmVzc19ib29raW5nXG4gICAgICBjb25zdCB1cGRhdGVCb29raW5nUXVlcnkgPSBgXG4gICAgICAgIFVQREFURSBhZGRyZXNzX2Jvb2tpbmdcbiAgICAgICAgU0VUIGZpbG1fbm8gPSBDT0FMRVNDRSg/LCBmaWxtX25vKSxcbiAgICAgICAgICAgIGJvb2tpbmdfbm8gPSBDT0FMRVNDRSg/LCBib29raW5nX25vKSxcbiAgICAgICAgICAgIHVwZGF0ZV9ieSA9ID8sXG4gICAgICAgICAgICB1cGRhdGVfZGF0ZSA9IE5PVygpXG4gICAgICAgIFdIRVJFIGFkZHJlc3NfaWQgPSA/IEFORCBib29raW5nX25vID0gP1xuICAgICAgYFxuICAgICAgY29uc3QgdXBkYXRlQm9va2luZ1BhcmFtcyA9IFtmaWxtX25vLCBib29raW5nX25vLCB1cGRhdGVfYnksIGlkLCBvcmlnaW5hbF9ib29raW5nX25vXVxuICAgICAgY29uc3QgW3VwZGF0ZUJvb2tpbmdSZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKHVwZGF0ZUJvb2tpbmdRdWVyeSwgdXBkYXRlQm9va2luZ1BhcmFtcylcblxuICAgICAgaWYgKHVwZGF0ZUJvb2tpbmdSZXN1bHQuYWZmZWN0ZWRSb3dzID09PSAwKSB7XG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucm9sbGJhY2soKVxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdObyBtYXRjaGluZyByZXNlcnZhdGlvbiBmb3VuZCB0byB1cGRhdGUnIH0pLCB7XG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgICAgfSlcbiAgICAgIH1cblxuICAgICAgcmVzcG9uc2VEYXRhID0geyBtZXNzYWdlOiAnVXBkYXRlZCByZXNlcnZhdGlvbiBzdWNjZXNzZnVsbHknIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8g4LiW4LmJ4LiyIG9yaWdpbmFsX2Jvb2tpbmdfbm8g4LmA4Lib4LmH4LiZIG51bGwg4Lir4Lij4Li34Lit4LmE4Lih4LmI4LiW4Li54LiB4Lij4Liw4Lia4Li4LCDguJfguLPguIHguLLguKMgVVBEQVRFIOC5geC4luC4p+C4l+C4teC5iOC4oeC4tSBib29raW5nX25vIOC5gOC4m+C5h+C4mSBudWxsXG4gICAgICBjb25zdCB1cGRhdGVOdWxsUXVlcnkgPSBgXG4gICAgICAgIFVQREFURSBhZGRyZXNzX2Jvb2tpbmdcbiAgICAgICAgU0VUIGZpbG1fbm8gPSBDT0FMRVNDRSg/LCBmaWxtX25vKSxcbiAgICAgICAgICAgIGJvb2tpbmdfbm8gPSBDT0FMRVNDRSg/LCBib29raW5nX25vKSxcbiAgICAgICAgICAgIHVwZGF0ZV9ieSA9ID8sXG4gICAgICAgICAgICB1cGRhdGVfZGF0ZSA9IE5PVygpXG4gICAgICAgIFdIRVJFIGFkZHJlc3NfaWQgPSA/IEFORCBib29raW5nX25vIElTIE5VTExcbiAgICAgIGBcbiAgICAgIGNvbnN0IHVwZGF0ZU51bGxQYXJhbXMgPSBbZmlsbV9ubywgYm9va2luZ19ubywgdXBkYXRlX2J5LCBpZF1cbiAgICAgIGNvbnN0IFt1cGRhdGVOdWxsUmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSh1cGRhdGVOdWxsUXVlcnksIHVwZGF0ZU51bGxQYXJhbXMpXG5cbiAgICAgIGlmICh1cGRhdGVOdWxsUmVzdWx0LmFmZmVjdGVkUm93cyA+IDApIHtcbiAgICAgICAgLy8g4LiW4LmJ4Liy4Lit4Lix4Lib4LmA4LiU4LiV4LmB4LiW4Lin4Liq4Liz4LmA4Lij4LmH4LiIXG4gICAgICAgIHJlc3BvbnNlRGF0YSA9IHsgbWVzc2FnZTogJ1VwZGF0ZWQgcmVzZXJ2YXRpb24gc3VjY2Vzc2Z1bGx5JyB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyDguJbguYnguLLguYTguKHguYjguKHguLXguYHguJbguKfguJfguLXguYjguKHguLUgYm9va2luZ19ubyDguYDguJvguYfguJkgbnVsbCwg4LiX4Liz4LiB4Liy4LijIElOU0VSVCDguYHguJbguKfguYPguKvguKHguYhcbiAgICAgICAgY29uc3QgaW5zZXJ0UXVlcnkgPSBgXG4gICAgICAgICAgSU5TRVJUIElOVE8gYWRkcmVzc19ib29raW5nIChhZGRyZXNzX2lkLCBmaWxtX25vLCBib29raW5nX25vLCB1cGRhdGVfYnksIHVwZGF0ZV9kYXRlLCB1bmlfaWQpXG4gICAgICAgICAgVkFMVUVTICg/LCA/LCA/LCA/LCBOT1coKSwgPylcbiAgICAgICAgYFxuICAgICAgICBjb25zdCBpbnNlcnRQYXJhbXMgPSBbaWQsIGZpbG1fbm8sIGJvb2tpbmdfbm8sIHVwZGF0ZV9ieSwgdW5pX2lkXVxuICAgICAgICBjb25zdCBbaW5zZXJ0UmVzdWx0XSA9IGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZShpbnNlcnRRdWVyeSwgaW5zZXJ0UGFyYW1zKVxuXG4gICAgICAgIHJlc3BvbnNlRGF0YSA9IHsgbWVzc2FnZTogJ1Jlc2VydmF0aW9uIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JywgcmVzZXJ2YXRpb25faWQ6IGluc2VydFJlc3VsdC5pbnNlcnRJZCB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8g4LiC4Lix4LmJ4LiZ4LiV4Lit4LiZ4LmA4Lie4Li04LmI4Lih4LmA4LiV4Li04LihOiDguJXguKPguKfguIjguKrguK3guJrguYHguKXguLDguK3guLHguJvguYDguJTguJUgZmlsbV9ubyDguYPguJnguJXguLLguKPguLLguIcgYWRkcmVzcyDguJbguYnguLLguKHguLXguIHguLLguKPguYDguJvguKXguLXguYjguKLguJnguYHguJvguKXguIdcbiAgICBpZiAoZmlsbV9ubyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyDguJTguLbguIcgZmlsbV9ubyDguJvguLHguIjguIjguLjguJrguLHguJnguIjguLLguIHguJXguLLguKPguLLguIcgYWRkcmVzc1xuICAgICAgY29uc3Qgc2VsZWN0QWRkcmVzc1F1ZXJ5ID0gJ1NFTEVDVCBmaWxtX25vIEZST00gYWRkcmVzcyBXSEVSRSBpZCA9ID8nXG4gICAgICBjb25zdCBbYWRkcmVzc1Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKHNlbGVjdEFkZHJlc3NRdWVyeSwgW2lkXSlcblxuICAgICAgaWYgKGFkZHJlc3NSb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY3VycmVudEZpbG1ObyA9IGFkZHJlc3NSb3dzWzBdLmZpbG1fbm9cblxuICAgICAgICAvLyDguJbguYnguLIgZmlsbV9ubyDguYPguKvguKHguYjguYTguKHguYjguYDguJfguYjguLLguIHguLHguJogZmlsbV9ubyDguJvguLHguIjguIjguLjguJrguLHguJksIOC4l+C4s+C4geC4suC4o+C4reC4seC4m+C5gOC4lOC4lVxuICAgICAgICBpZiAoY3VycmVudEZpbG1ObyAhPT0gZmlsbV9ubykge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZUFkZHJlc3NRdWVyeSA9IGBcbiAgICAgICAgICAgIFVQREFURSBhZGRyZXNzXG4gICAgICAgICAgICBTRVQgZmlsbV9ubyA9ID8sXG4gICAgICAgICAgICAgICAgdXBkYXRlX2J5ID0gPyxcbiAgICAgICAgICAgICAgICB1cGRhdGVfZGF0ZSA9IE5PVygpXG4gICAgICAgICAgICBXSEVSRSBpZCA9ID9cbiAgICAgICAgICBgXG4gICAgICAgICAgY29uc3QgdXBkYXRlQWRkcmVzc1BhcmFtcyA9IFtmaWxtX25vLCB1cGRhdGVfYnksIGlkXVxuICAgICAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZXhlY3V0ZSh1cGRhdGVBZGRyZXNzUXVlcnksIHVwZGF0ZUFkZHJlc3NQYXJhbXMpXG5cbiAgICAgICAgICByZXNwb25zZURhdGEubWVzc2FnZSArPSAnIOC5geC4peC4sOC4reC4seC4m+C5gOC4lOC4lSBmaWxtX25vIOC5g+C4mSBhZGRyZXNzIOC4quC4s+C5gOC4o+C5h+C4iCdcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8g4LiW4LmJ4Liy4LmE4Lih4LmI4Lie4LiaIGFkZHJlc3Mg4LiX4Li14LmI4LiV4Lij4LiH4LiB4Lix4LiaIGlkXG4gICAgICAgIGF3YWl0IGNvbm5lY3Rpb24ucm9sbGJhY2soKVxuICAgICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdBZGRyZXNzIG5vdCBmb3VuZCcgfSksIHtcbiAgICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIOC4ouC4t+C4meC4ouC4seC4meC4mOC4uOC4o+C4geC4o+C4o+C4oVxuICAgIGF3YWl0IGNvbm5lY3Rpb24uY29tbWl0KClcblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2VEYXRhKSwge1xuICAgICAgc3RhdHVzOiBvcmlnaW5hbF9ib29raW5nX25vID8gMjAwIDogcmVzcG9uc2VEYXRhLm1lc3NhZ2UuaW5jbHVkZXMoJ2NyZWF0ZWQnKSA/IDIwMSA6IDIwMCxcbiAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoY29ubmVjdGlvbikge1xuICAgICAgYXdhaXQgY29ubmVjdGlvbi5yb2xsYmFjaygpXG4gICAgfVxuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byB1cGRhdGUvY3JlYXRlIGRhdGE6JywgZXJyb3IpXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZS9jcmVhdGUgZGF0YScsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSksIHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICB9KVxuICB9IGZpbmFsbHkge1xuICAgIGlmIChjb25uZWN0aW9uKSB7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmVuZCgpXG4gICAgfVxuICB9XG59XG5cbi8vIEFQSSBQT1NUIOC5gOC4nuC4t+C5iOC4reC4quC4o+C5ieC4suC4h+C4guC5ieC4reC4oeC4ueC4peC5g+C4q+C4oeC5iOC5g+C4meC4leC4suC4o+C4suC4hyBhZGRyZXNzX2Jvb2tpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcbiAgbGV0IGNvbm5lY3Rpb25cblxuICB0cnkge1xuICAgIGNvbnN0IHsgaWQsIGZpbG1fbm8sIGJvb2tpbmdfbm8sIHVwZGF0ZV9ieSwgdW5pX2lkIH0gPSBhd2FpdCByZXF1ZXN0Lmpzb24oKVxuXG4gICAgLy8g4LiV4Lij4Lin4LiI4Liq4Lit4Lia4Lin4LmI4Liy4Lif4Li04Lil4LiU4LmM4LiX4Lix4LmJ4LiH4Lir4Lih4LiU4Lih4Li14LiE4LmI4LiyXG4gICAgaWYgKCFpZCB8fCAhZmlsbV9ubyB8fCAhYm9va2luZ19ubyB8fCAhdXBkYXRlX2J5IHx8ICF1bmlfaWQpIHtcbiAgICAgIHJldHVybiBuZXcgUmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0FsbCBmaWVsZHMgZXhjZXB0IG9yaWdpbmFsX2Jvb2tpbmdfbm8gYXJlIHJlcXVpcmVkJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8g4LmA4LiK4Li34LmI4Lit4Lih4LiV4LmI4Lit4LiB4Lix4Lia4LiQ4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54LilXG4gICAgY29ubmVjdGlvbiA9IGF3YWl0IGRiQ29ubmVjdCgpXG5cbiAgICAvLyDguJXguKPguKfguIjguKrguK3guJrguKfguYjguLLguKHguLXguYHguJbguKfguJfguLXguYjguJXguKPguIfguIHguLHguJogYWRkcmVzc19pZCDguYHguKXguLAgYm9va2luZ19ubyDguK3guKLguLnguYjguYHguKXguYnguKfguKvguKPguLfguK3guYTguKHguYhcbiAgICBjb25zdCBjaGVja1F1ZXJ5ID0gYFxuICAgICAgU0VMRUNUICogRlJPTSBhZGRyZXNzX2Jvb2tpbmcgV0hFUkUgYWRkcmVzc19pZCA9ID8gQU5EIGJvb2tpbmdfbm8gPSA/XG4gICAgYFxuICAgIGNvbnN0IGNoZWNrUGFyYW1zID0gW2lkLCBib29raW5nX25vXVxuICAgIGNvbnN0IFtleGlzdGluZ1Jvd3NdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKGNoZWNrUXVlcnksIGNoZWNrUGFyYW1zKVxuXG4gICAgaWYgKGV4aXN0aW5nUm93cy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdSZXNlcnZhdGlvbiB3aXRoIHRoaXMgYm9va2luZ19ubyBhbHJlYWR5IGV4aXN0cycgfSksIHtcbiAgICAgICAgc3RhdHVzOiA0MDksXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gICAgICB9KVxuICAgIH1cblxuICAgIC8vIOC4l+C4s+C4geC4suC4oyBJTlNFUlQg4LiC4LmJ4Lit4Lih4Li54Lil4LmD4Lir4Lih4LmI4LmD4LiZ4LiV4Liy4Lij4Liy4LiHIGFkZHJlc3NfYm9va2luZ1xuICAgIGNvbnN0IGluc2VydFF1ZXJ5ID0gYFxuICAgICAgSU5TRVJUIElOVE8gYWRkcmVzc19ib29raW5nIChhZGRyZXNzX2lkLCBmaWxtX25vLCBib29raW5nX25vLCB1cGRhdGVfYnksIHVwZGF0ZV9kYXRlLCB1bmlfaWQpXG4gICAgICBWQUxVRVMgKD8sID8sID8sID8sIE5PVygpLCA/KVxuICAgIGBcbiAgICBjb25zdCBpbnNlcnRQYXJhbXMgPSBbaWQsIGZpbG1fbm8sIGJvb2tpbmdfbm8sIHVwZGF0ZV9ieSwgdW5pX2lkXVxuICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKGluc2VydFF1ZXJ5LCBpbnNlcnRQYXJhbXMpXG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBtZXNzYWdlOiAnUmVzZXJ2YXRpb24gY3JlYXRlZCBzdWNjZXNzZnVsbHknLCByZXNlcnZhdGlvbl9pZDogcmVzdWx0Lmluc2VydElkIH0pLFxuICAgICAge1xuICAgICAgICBzdGF0dXM6IDIwMSxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH1cbiAgICApXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSByZXNlcnZhdGlvbjonLCBlcnJvcilcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIHJlc2VydmF0aW9uJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9KSwge1xuICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfVxuICAgIH0pXG4gIH0gZmluYWxseSB7XG4gICAgaWYgKGNvbm5lY3Rpb24pIHtcbiAgICAgIGF3YWl0IGNvbm5lY3Rpb24uZW5kKClcbiAgICB9XG4gIH1cbn1cblxuLy8gQVBJIERFTEVURSDguYDguJ7guLfguYjguK3guKXguJrguILguYnguK3guKHguLnguKXguYPguJnguJXguLLguKPguLLguIcgYWRkcmVzc19ib29raW5nXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcXVlc3QpIHtcbiAgbGV0IGNvbm5lY3Rpb25cblxuICB0cnkge1xuICAgIGNvbnN0IHsgaWQsIGJvb2tpbmdfbm8gfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXG5cbiAgICAvLyDguJXguKPguKfguIjguKrguK3guJrguKfguYjguLLguJ/guLTguKXguJTguYzguJfguLXguYjguIjguLPguYDguJvguYfguJnguKHguLXguITguYjguLJcbiAgICBpZiAoIWlkIHx8ICFib29raW5nX25vKSB7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKEpTT04uc3RyaW5naWZ5KHsgZXJyb3I6ICdGaWVsZHMgaWQgYW5kIGJvb2tpbmdfbm8gYXJlIHJlcXVpcmVkJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8g4LmA4LiK4Li34LmI4Lit4Lih4LiV4LmI4Lit4LiB4Lix4Lia4LiQ4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54LilXG4gICAgY29ubmVjdGlvbiA9IGF3YWl0IGRiQ29ubmVjdCgpXG5cbiAgICAvLyDguJfguLPguIHguLLguKMgREVMRVRFIOC4guC5ieC4reC4oeC4ueC4peC5g+C4meC4leC4suC4o+C4suC4hyBhZGRyZXNzX2Jvb2tpbmcg4LmC4LiU4Lii4LmD4LiK4LmJIGFkZHJlc3NfaWQg4LmB4Lil4LiwIGJvb2tpbmdfbm9cbiAgICBjb25zdCBkZWxldGVRdWVyeSA9IGBcbiAgICAgIERFTEVURSBGUk9NIGFkZHJlc3NfYm9va2luZyBXSEVSRSBhZGRyZXNzX2lkID0gPyBBTkQgYm9va2luZ19ubyA9ID9cbiAgICBgXG4gICAgY29uc3QgZGVsZXRlUGFyYW1zID0gW2lkLCBib29raW5nX25vXVxuICAgIGNvbnN0IFtyZXN1bHRdID0gYXdhaXQgY29ubmVjdGlvbi5leGVjdXRlKGRlbGV0ZVF1ZXJ5LCBkZWxldGVQYXJhbXMpXG5cbiAgICBpZiAocmVzdWx0LmFmZmVjdGVkUm93cyA9PT0gMCkge1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnTm8gbWF0Y2hpbmcgcmVzZXJ2YXRpb24gZm91bmQgdG8gZGVsZXRlJyB9KSwge1xuICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IG1lc3NhZ2U6ICdSZXNlcnZhdGlvbiBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSksIHtcbiAgICAgIHN0YXR1czogMjAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICB9KVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBkZWxldGUgcmVzZXJ2YXRpb246JywgZXJyb3IpXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSByZXNlcnZhdGlvbicsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSksIHtcbiAgICAgIHN0YXR1czogNTAwLFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICB9KVxuICB9IGZpbmFsbHkge1xuICAgIGlmIChjb25uZWN0aW9uKSB7XG4gICAgICBhd2FpdCBjb25uZWN0aW9uLmVuZCgpXG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsibXlzcWwiLCJkYkNvbm5lY3QiLCJjcmVhdGVDb25uZWN0aW9uIiwiaG9zdCIsInByb2Nlc3MiLCJlbnYiLCJEQl9IT1NUIiwidXNlciIsIkRCX1VTRVIiLCJwYXNzd29yZCIsIkRCX1BBU1NXT1JEIiwiZGF0YWJhc2UiLCJEQl9OQU1FIiwiR0VUIiwicmVxdWVzdCIsImNvbm5lY3Rpb24iLCJ1cmwiLCJVUkwiLCJ1bmlfaWQiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJhZGRyZXNzX2lkIiwiUmVzcG9uc2UiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJzdGF0dXMiLCJoZWFkZXJzIiwicmVzcG9uc2VEYXRhIiwicXVlcnkiLCJwYXJhbXMiLCJyb3dzIiwiZXhlY3V0ZSIsImJvb2tpbmdEZXRhaWxzIiwibWFwIiwicm93IiwiYm9va2luZ19ubyIsImZpbG1fbm8iLCJyZXNlcnZhdGlvbl9pZCIsImJvb2tpbmdfZGV0YWlscyIsImFkZHJlc3NRdWVyeSIsImFkZHJlc3NQYXJhbXMiLCJhZGRyZXNzUm93cyIsImxlbmd0aCIsImRhdGEiLCJhZGRyZXNzSWRzIiwiYWRkcmVzcyIsImlkIiwicGxhY2Vob2xkZXJzIiwiam9pbiIsImJvb2tpbmdRdWVyeSIsImJvb2tpbmdQYXJhbXMiLCJib29raW5nUm93cyIsImNvbWJpbmVkRGF0YSIsImZvckVhY2giLCJib29raW5ncyIsImZpbHRlciIsImJvb2tpbmciLCJwdXNoIiwiYm9va2luZ19maWxtX25vIiwiY29uc29sZSIsImRldGFpbHMiLCJtZXNzYWdlIiwiZW5kIiwiUFVUIiwib3JpZ2luYWxfYm9va2luZ19ubyIsInVwZGF0ZV9ieSIsImpzb24iLCJ1bmRlZmluZWQiLCJiZWdpblRyYW5zYWN0aW9uIiwidXBkYXRlQm9va2luZ1F1ZXJ5IiwidXBkYXRlQm9va2luZ1BhcmFtcyIsInVwZGF0ZUJvb2tpbmdSZXN1bHQiLCJhZmZlY3RlZFJvd3MiLCJyb2xsYmFjayIsInVwZGF0ZU51bGxRdWVyeSIsInVwZGF0ZU51bGxQYXJhbXMiLCJ1cGRhdGVOdWxsUmVzdWx0IiwiaW5zZXJ0UXVlcnkiLCJpbnNlcnRQYXJhbXMiLCJpbnNlcnRSZXN1bHQiLCJpbnNlcnRJZCIsInNlbGVjdEFkZHJlc3NRdWVyeSIsImN1cnJlbnRGaWxtTm8iLCJ1cGRhdGVBZGRyZXNzUXVlcnkiLCJ1cGRhdGVBZGRyZXNzUGFyYW1zIiwiY29tbWl0IiwiaW5jbHVkZXMiLCJQT1NUIiwiY2hlY2tRdWVyeSIsImNoZWNrUGFyYW1zIiwiZXhpc3RpbmdSb3dzIiwicmVzdWx0IiwiREVMRVRFIiwiZGVsZXRlUXVlcnkiLCJkZWxldGVQYXJhbXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/film-reservation/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1","vendor-chunks/mysql2@3.11.0","vendor-chunks/aws-ssl-profiles@1.1.1","vendor-chunks/iconv-lite@0.6.3","vendor-chunks/lru-cache@8.0.5","vendor-chunks/long@5.2.3","vendor-chunks/lru-cache@7.18.3","vendor-chunks/denque@2.1.0","vendor-chunks/is-property@1.0.2","vendor-chunks/sqlstring@2.3.3","vendor-chunks/seq-queue@0.0.5","vendor-chunks/named-placeholders@1.1.3","vendor-chunks/generate-function@2.3.1","vendor-chunks/safer-buffer@2.1.2"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@14.2.5_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ffilm-reservation%2Froute&page=%2Fapi%2Ffilm-reservation%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ffilm-reservation%2Froute.js&appDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Ccomma%5COneDrive%5CDesktop%5Cpapayond-1&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();